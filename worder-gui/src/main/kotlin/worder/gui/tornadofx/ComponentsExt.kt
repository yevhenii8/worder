/**
 * Stamp was generated by <generateFileStamps.sh>
 * Last time was modified by <StampedFile.kt>
 *
 * Name: <ComponentsExt.kt>
 * Created: <02/07/2020, 11:27:00 PM>
 * Modified: <04/08/2020, 07:11:08 PM>
 * Version: <8>
 */

package worder.gui.tornadofx

import javafx.collections.ObservableSet
import javafx.event.EventTarget
import javafx.scene.Node
import tornadofx.SetConversionListener
import tornadofx.UIComponent
import tornadofx.bind
import tornadofx.getChildList

inline fun <reified T> EventTarget.bindComponents(
        sourceSet: ObservableSet<T>,
        noinline converter: (T) -> UIComponent
): SetConversionListener<T, Node> = requireNotNull(getChildList()?.bind(sourceSet) { converter(it).root }) {
    "Unable to extract child nodes from $this"
}

fun EventTarget.replaceChildren(vararg uiComponent: UIComponent) {
    val children = requireNotNull(getChildList()) { "This node doesn't have a child list" }
    children.clear()
    children.addAll(uiComponent.map { it.root })
}
